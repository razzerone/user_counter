<!DOCTYPE html>
<html lang="ru">
<head>
    <link rel="stylesheet" href='/static/mystyle.css'/>
    <meta charset="utf-8"/>

</head>
<body>
<form name="date" id='form' action="{{ form_url }}" method="post">
    <label for="date_begin">
        С
        <input type="date" name="date_begin" value="1999-01-01">
    </label>
    <br>
    <label for="date_end">
        До
        <input type="date" name="date_end" value="2030-01-01">
    </label>
    <br>
    <label>
        Браузер
        <input list="browsers" name="browser" id="browser">
        <datalist id="browsers">
            {% for br in browsers %}
                <option value="{{ br }}">
            {% endfor %}
        </datalist>
    </label>
    <br>
    <label>
        OS
        <input list="oses" name="os" id="os">
        <datalist id="oses">
            {% for os in oses %}
                <option value="{{ os }}">
            {% endfor %}
        </datalist>
    </label>
    <br>

    <input type="submit" value="Выбрать"/>
</form>

<table>
    <tr>
        <th>Number</th>
        <th>Address</th>
        <th>Page</th>
        <th>Time</th>
        <th>Useragent</th>
        <th>Browser</th>
        <th>OS</th>
        <th>Country</th>
        <th>User-Id</th>
    </tr>
    {% for row in table %}
        <tr>
            <td>{{ row.id }}</td>
            <td>{{ row.ip }}</td>
            <td>{{ row.page }}</td>
            <td class="item"> {{ row.time }}</td>
            <td>{{ row.user_agent }}</td>
            <td>{{ row.browser }}</td>
            <td>{{ row.os }}</td>
            <td>{{ row.country }}</td>
            <td>{{ 'anonymous' if row.user_id is none else row.user_id }}</td>
        </tr>
    {% endfor %}
</table>
<script>
    var items = document.getElementsByClassName("item"), i, len;


    for (i = 0, len = items.length; i < len; i++) {
        var value = items[i].innerHTML;
        var stri = value.toString();
        var rz = stri.slice(0, 5) + "-" + stri.slice(5, 7) + "-" + stri.slice(7, 9) + "  " + stri.slice(9, 11) + ":" + stri.slice(11, 13) + ":" + stri.slice(13, 15);
        items[i].innerHTML = rz;
    }

</script>
</body>
</html>